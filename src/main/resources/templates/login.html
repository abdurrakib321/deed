
<!--<!doctype html>-->
<!--<html lang="en" data-bs-theme="auto">-->
<!--<head>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>-->

<!--    <meta charset="utf-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <meta name="description" content="">-->
<!--    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">-->
<!--    <meta name="generator" content="Hugo 0.122.0">-->
<!--    <title>Signin Template Â· Bootstrap v5.3</title>-->

<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->

<!--    <meta name="theme-color" content="#712cf9">-->
<!--    <style>-->
<!--        .divider:after,-->
<!--        .divider:before {-->
<!--            content: "";-->
<!--            flex: 1;-->
<!--            height: 1px;-->
<!--            background: #eee;-->
<!--        }-->
<!--        .h-custom {-->
<!--            height: calc(100% - 73px);-->
<!--        }-->
<!--        @media (max-width: 450px) {-->
<!--            .h-custom {-->
<!--                height: 100%;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="d-flex align-items-center py-4 bg-body-tertiary">-->
<!--&lt;!&ndash;<main class="form-signin w-100 m-auto">&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="d-flex p-2 justify-content-center align-items-center">&ndash;&gt;-->
<!--&lt;!&ndash;        <h1 class="mx-auto">&ndash;&gt;-->
<!--&lt;!&ndash;            Interkashi&ndash;&gt;-->
<!--&lt;!&ndash;        </h1>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->
<!--&lt;!&ndash;    <form class="px-4" action="/login" method="post">&ndash;&gt;-->
<!--&lt;!&ndash;        &lt;!&ndash; Email input &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div data-mdb-input-init class="form-outline mb-4">&ndash;&gt;-->
<!--&lt;!&ndash;            <label class="form-label" for="form2Example1">Email address</label>&ndash;&gt;-->
<!--&lt;!&ndash;            <input type="text" id="form2Example1" class="form-control" name="username" />&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--&lt;!&ndash;        &lt;!&ndash; Password input &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <div data-mdb-input-init class="form-outline mb-4">&ndash;&gt;-->
<!--&lt;!&ndash;            <label class="form-label" for="form2Example2">Password</label>&ndash;&gt;-->
<!--&lt;!&ndash;            <input name="password" type="password" id="form2Example2" class="form-control" />&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->



<!--&lt;!&ndash;        &lt;!&ndash; Submit button &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;        <button  type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-block mb-4">Sign in</button>&ndash;&gt;-->

<!--&lt;!&ndash;    </form>&ndash;&gt;-->
<!--&lt;!&ndash;</main>&ndash;&gt;-->
<!--<section class="vh-100 vw-100">-->
<!--    <div class="container-fluid h-custom">-->
<!--        <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">-->
<!--            <h1 class="mx-auto">Interkashi</h1>-->
<!--        </div>-->
<!--        <div class="row d-flex justify-content-center align-items-center h-100">-->
<!--            <div class="col-md-9 col-lg-6 col-xl-5">-->
<!--                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"-->
<!--                     class="img-fluid" alt="Sample image">-->
<!--            </div>-->
<!--            <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">-->
<!--                <form action="/login" method="post">-->

<!--                    &lt;!&ndash; Email input &ndash;&gt;-->
<!--                    <div data-mdb-input-init class="form-outline mb-4">-->
<!--                        <label class="form-label" for="form3Example3">Username</label>-->
<!--                        <input name="username" type="text" id="form3Example3" class="form-control form-control-lg"-->
<!--                               placeholder="Enter a valid email address" />-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Password input &ndash;&gt;-->
<!--                    <div data-mdb-input-init class="form-outline mb-3">-->
<!--                        <label class="form-label" for="form3Example4">Password</label>-->
<!--                        <input name="password" type="password" id="form3Example4" class="form-control form-control-lg"-->
<!--                               placeholder="Enter password" />-->
<!--                    </div>-->

<!--                    <div class="text-center text-lg-start mt-4 pt-2">-->
<!--                        <button  type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg"-->
<!--                                 style="padding-left: 2.5rem; padding-right: 2.5rem;">Login</button>-->
<!--                    </div>-->

<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--</section>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
    <!-- Material-UI CSS -->
    <link rel="stylesheet" href="https://unpkg.com/@mui/material@latest/dist/material-ui.min.css">
    <style>
        /* Additional custom styling */
        body {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            height: 100vh;
            margin: 0;
            background-color: #fff;
        }
        .container {
            max-width: 400px;
            width: 100%;
            padding: 20px;
            background-color: #f8f8f8;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-top: 20px;
        }
        .form-group {
            margin-bottom: 15px;
            text-align: left;
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            margin-bottom: 10px;
        }
        .toggle-password {
            position: absolute;
            top: 38px;
            right: 10px;
            cursor: pointer;
            background: none;
            border: none;
            color: #333;
        }
        .mui-button {
            background-color: #ff416c;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        .mui-button:hover {
            background-color: #fff;
            color: #ff416c;
            border: 1px solid #ff416c;
        }
        .error {
            color: red;
            font-size: 0.875rem;
        }
        h2 {
            margin-bottom: 20px;
            color: #333;
        }
    </style>
</head>
<body>
<div class="container">
    <h2>Login</h2>
    <form id="login-form">
        <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" class="mui-textfield" placeholder="Enter username" required>
        </div>
        <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" class="mui-textfield" placeholder="Enter password" required>
            <button type="button" class="toggle-password" onclick="togglePasswordVisibility('password')">Show</button>
        </div>
        <button type="submit" class="mui-button mui-button-contained mui-button-primary">LOGIN</button>
        <p id="error-message" class="error"></p>
    </form>
</div>

<!-- Material-UI JS -->
<script src="https://unpkg.com/@mui/material@latest/dist/material-ui.min.js"></script>
<script>
    function togglePasswordVisibility(fieldId) {
        const field = document.getElementById(fieldId);
        const toggleButton = field.nextElementSibling;
        if (field.type === "password") {
            field.type = "text";
            toggleButton.textContent = "Hide";
        } else {
            field.type = "password";
            toggleButton.textContent = "Show";
        }
    }

    document.getElementById('login-form').addEventListener('submit', function(event) {
        event.preventDefault();

        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const errorMessage = document.getElementById('error-message');

        // Validate username and password
        if (!username || !password) {
            errorMessage.textContent = 'Both fields are required.';
            return;
        }

        // Prepare data for submission
        const data = {
            username: username,
            password: password
        };

        // Send data to the server
        fetch('http://localhost:3100/api/auth/login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => {
            if (!response.ok) {
                return response.json().then(errorData => {
                    throw new Error(errorData.error || 'Server error');
                });
            }
            // Extract the token from the response headers
            const token = response.headers.get('Authorization');

            return response.json().then(data => {
                if (data.error) {
                    errorMessage.textContent = data.error;
                } else {
                    // Store token in local storage or use as needed
                    if (token) {
                        localStorage.setItem('authToken', token.replace('Bearer ', ''));
                    }
                    // Handle successful login (e.g., redirect to a different page)
                    window.location.href = '/api/status'; // Redirect to dashboard page
                }
            });
        })
        .catch(error => {
            errorMessage.textContent = error.message;
            console.error('Error:', error);
        });
    });
</script>
</body>
</html>
